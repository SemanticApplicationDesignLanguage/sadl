/*
 * generated by Xtext 2.11.0.RC2
 */
package com.ge.research.sadl.testsuite.validation

import com.ge.research.sadl.testsuite.testSuite.TestModel
import com.ge.research.sadl.testsuite.testSuite.TestSuitePackage
import org.eclipse.xtext.validation.Check

/**
 * This class contains custom validation rules. 
 *
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class TestSuiteValidator extends AbstractTestSuiteValidator {
	
//	public static val INVALID_NAME = 'invalidName'
//
//	@Check
//	def checkGreetingStartsWithCapital(Greeting greeting) {
//		if (!Character.isUpperCase(greeting.name.charAt(0))) {
//			warning('Name should start with a capital', 
//					TestSuitePackage.Literals.GREETING__NAME,
//					INVALID_NAME)
//		}
//	}

	@Check
	def checkSadlModel(TestModel model) {
		val tsts = model.tests
		var tstsFound = newArrayList
		for (tst : tsts) {
			if (tst.testResource !== null) {
				val tsturi = tst.testResource.baseUri
				if (tstsFound.contains(tsturi)) {
					warning("Duplicate test", tst, TestSuitePackage.Literals.TEST__TEST_RESOURCE)
				}
				else {
					tstsFound.add(tsturi);
				}
			}
		}
	}
	
}
