<html>

<head>
<title>Developing UnittedQuantity Handlers</title>
  <head>
    <meta name="GENERATOR" content="Microsoft FrontPage 5.0">
    <meta name="ProgId" content="FrontPage.Editor.Document">
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  </head>
  <body>
    <h1>Developing UnittedQuantity Handlers<br>
    </h1>
    <h5>Last revised
      <!--webbot bot="Timestamp" S-Type="EDITED" S-Format="%m/%d/%Y" startspan -->10/27/2022<!--webbot bot="Timestamp" endspan i-checksum="12611" -->.
      <a href="contact.html">Contact us</a>.</h5>
    <p>Two kinds of UnittedQuantity handlers are used by the SADL IDE. The first 
    is responsible for expanding references to UnittedQuantity instances and 
    variable </p>
    <p>UnittedQuantity handlers must implement the Java Interface class 
    com.ge.research.sadl.processing.ISadlUnittedQuantityHandler. Implementations 
    must include the following three methods.</p>
    <ol>
      <li>Rule checkRuleForNewUnittedQuantityCreation(Rule rule) -- method that 
      is called when the processing of the rule, query, or test is almost 
      completed and which must add any built-in calls to create units and to 
      create new instances of UnittedQuantity for the rule head.</li>
      <li>List&lt;GraphPatternElement&gt; expandUnittedQuantities(List&lt;GraphPatternElement&gt; 
      patterns, BuiltinElement be, boolean isRuleThen) throws 
      TranslationException -- method to expand binary operations on 
      UnittedQuantity arguments to create additional instances of TripleElement 
      to appear in the Rule body. This method should do all validation that is 
      implied by the ontology of UnittedQuantity.</li>
      <li>void reset() -- method to reset the handler instance for a new rule, 
      query, or test.</li>
    </ol>
    <p>A simple implementation can be found in the class 
    com.ge.research.sadl.jena.SadlSimpleUnittedQuantityHandlerForJena.</p>

    <p style="line-height: 100%; margin-bottom: 0in">In order for the first rule
      above to work with a reasoner supporting numerical built-in functions as
      operators, the range of <em>age</em> and the <em>value</em> and <em>unit</em>
      of the right side of the greater than or equal comparison operator must be
      preserved in the <a href="SadlIntermediateForm.html">Intermediate
        Form</a>, passed on to the reasoner-specific translator for correct
      translation, and be represented in the final rule given to the reasoner
      for inference (see <a href="../ReasonerTranslatorPairs.html">SADL
        Translator/Reasoner Plug-in Pairs</a>). There are two different possible
      approaches to accomplishing the translation. One approach is to
      expand the details of each element of type <em>UnittedQuantity</em> to
      make the <em>value</em> and <em>unit</em> triples explicit, as they were
      in the second rule above. The other approach is to enhance the built-in
      math operators that work on unitted quantities, such as "&gt;=", to handle
      arguments of type <em>UnittedQuantity</em>. The Jena-based reasoner/translator 
    pair that comes bundled with SADL can handle both approaches. Which approach is used depends upon the preference setting "Expand UnittedQuantity in translation". If this preference is checked, the
        value and unit properties of UnittedQuantity will be expanded and made 
    explicit in translation. If it is not checked, the UnittedQuantity instances will be passed directly into math and
        comparison operators.<span style="color: #CC0000"> </span>Note that 
    other the preference is actually applied in the Intermediate Form 
    translator, so other reasoner/translator pairs that have simple numerical 
    operation built-ins taking numerical input should be able to work with 
    unitted quantitites.</p>
    
</body>

</html>